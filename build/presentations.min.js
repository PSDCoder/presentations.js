!function(e){"use strict";var t="presentations",n="presentation-focused-element",s={activeSlide:1,slideWithKeyboard:!0,loopMode:!1,pagination:!0,paginationOptions:{afterFirst:1,beforeLast:1,beforeCurrent:1,afterCurrent:1,prevText:"Prev",nextText:"Next"},progressBar:!0,arrows:!0,fullScreen:!0,fullScreenKey:"f",containerClass:"presentation",fullScreenClass:"fullscreen-mode",nextButtonClass:"presentation__button_action_next",nextButtonText:"Next",previousButtonClass:"presentation__button_action_previous",previousButtonText:"Previous",slidesListClass:"presentation-slides",slideClass:"presentation-slides__slide",activeSlideClass:"presentation-slides__slide_state_active",paginationClass:"presentation-navigation",paginationItemClass:"presentation-navigation__item",progressBarClass:"presentation-progress-bar",progressBarCountClass:"presentation-progress-bar__count",fullScreenButtonClass:"presentation__button_action_fullscreen",fullScreenButtonText:"Fullscreen (f)",fullScreenButtonTextEnabled:"Exit from fullscreen (f)"},l={},i={bindPresentationEvents:function(){this.on("click",function(){i.getPresentations().length>1&&!i.getFullScreenElement()&&e("."+n,this).trigger("focus")}.bind(this))},bindCommonEventHandlers:function(){var n=e("body");n.data(t+"-handlers")||(l.slideWithKeyboard&&e(window).on("keyup."+t,function(t){var n=null,s=i.getPresentations(),l=s.length,r=i.getFullScreenElement();if(r)n=e(r);else if(l&&2>l)n=e(s[0]);else if(l>1){var a=i.getFocusedPresentation();a.length&&(n=a)}n&&(37===t.keyCode?i.show.call(n,!1):39===t.keyCode&&i.show.call(n,!0))}),l.fullScreen&&i.supportsFullscreen()&&e(window).on("keyup."+t,function(t){var n=i.getPresentations(),s=n.length,r=null;if(t.keyCode===l.fullScreenKey.toUpperCase().charCodeAt(0)){if(s&&2>s)r=e(n[0]);else{var a=i.getFullScreenElement();if(a)r=e(a);else{var o=i.getFocusedPresentation();o.length&&(r=o)}}r&&i.toggleFullScreen.call(r)}}),l.fullScreen&&i.supportsFullscreen()&&e(document).on("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange",function(){n[(i.getFullScreenElement()?"add":"remove")+"Class"](l.fullScreenClass)}),n.data(t+"-handlers",!0))},unbindEventHandlers:function(){this.unbind("."+t),this.length===i.getPresentations().length&&(e(window).unbind("."+t),e("body").data(t+"-handlers",null))},addFocusedElement:function(){this.prepend('<input type="text" class="'+n+'">')},dropFocusElement:function(){e("."+n,this).remove()},getFocusedPresentation:function(){return e(document.activeElement).parents("."+l.containerClass)},getPresentations:function(){return e("[data-"+t+"]")},getSlides:function(){return e("."+l.slideClass,this)},show:function(n,s){var r,a,o=i.getSlides.call(this),u=o.length;if(e.isNumeric(n))a=0>n-1||n-1>=u?0:n-1;else for(var c=0;u>c;c++){var d=e(o[c]);if(d.hasClass(l.activeSlideClass)){if(n){if(u>c+1)a=c+1;else{if(!l.loopMode)return;a=0}this.trigger("nextSlide."+t,this,a)}else{if(0>c-1){if(!l.loopMode)return;a=u-1}else a=c-1;this.trigger("previousSlide."+t,this,a)}break}}0===a?this.trigger("firstSlide."+t,this,a):a===u-1&&this.trigger("lastSlide."+t,this,a),this.trigger("changeSlide."+t,this,a),r=e(o[a]),o.removeClass(l.activeSlideClass),r.addClass(l.activeSlideClass),l.loopMode||i.updateArrows.call(this,0===a,a===u-1),l.progressBar&&i.updateProgressBar.call(this,(a+1)/u),l.pagination&&i.updatePagination.call(this,a+1,u),e.isFunction(s)&&s(r)},buildPagination:function(){var t=e('<ul class="'+l.paginationClass+'"></ul>'),n=this;l.paginationOptions.loopMode=l.loopMode,this.append(t),t.on("click","a",function(t){t.preventDefault(),i.show.call(n,e(this).data("page"))})},updatePagination:function(t,n){var s=paginator(t,n,l.paginationOptions);e("."+l.paginationClass,this).html(i.getBuiltPaginationList(s))},getBuiltPaginationList:function(t){for(var n=e("<div/>"),s=0,i=t.length;i>s;s++){var r=null===t[s].page||t[s].disabled||t[s].current,a={text:t[s].text,"class":l.paginationClass+(r?"__text":"__link")},o=e(t[s].disabled||t[s].current?"<span/>":"<a/>",a);t[s].page&&(o.prop("href","#"),o.attr("data-page",t[s].page)),n.append(e("<li/>",{"class":l.paginationItemClass+(t[s].current?" "+l.paginationItemClass+"_state_active":"")}).append(o))}return n.html()},dropPagination:function(){e("."+l.paginationClass,this).remove()},buildProgressBar:function(){var t=e('<div class="'+l.progressBarCountClass+'"></div>'),n=e('<div class="'+l.progressBarClass+'"></div>');t.css({width:"0%"}),this.append(n.append(t))},updateProgressBar:function(t){e("."+l.progressBarCountClass,this).css({width:100*t+"%"})},dropProgressBar:function(){e("."+l.progressBarClass,this).remove()},buildArrows:function(){this.prepend('<a class="'+l.previousButtonClass+'" href="#">'+l.previousButtonText+"</a>"),this.append('<a class="'+l.nextButtonClass+'" href="#">'+l.nextButtonText+"</a>"),this.on("click."+t,"."+l.previousButtonClass,function(e){e.preventDefault(),r.previous.apply(this)}.bind(this)),this.on("click."+t,"."+l.nextButtonClass,function(e){e.preventDefault(),r.next.apply(this)}.bind(this))},updateArrows:function(t,n){e("."+l.previousButtonClass,this)[(t?"add":"remove")+"Class"](l.previousButtonClass+"_state_disabled"),e("."+l.nextButtonClass,this)[(n?"add":"remove")+"Class"](l.nextButtonClass+"_state_disabled")},dropArrows:function(){e("."+l.previousButtonClass,this).remove(),e("."+l.nextButtonClass,this).remove()},buildFullScreen:function(){var t=e('<button class="'+l.fullScreenButtonClass+'">'+l.fullScreenButtonText+"</button>"),n=this;t.on("click",function(){i.toggleFullScreen.call(n),e(this).trigger("blur")}),this.append(t)},getFullScreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(){var n=i.getFullScreenElement();if(n)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.trigger("fullScreenExit."+t,this);else{var s=this[0];s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen&&s.msRequestFullscreen(),this.trigger("fullScreen."+t,this)}e("."+l.fullScreenButtonClass,this).html(n?l.fullScreenButtonText:l.fullScreenButtonTextEnabled)},dropFullScreen:function(){e("."+l.fullScreenButtonClass,this).remove()},supportsFullscreen:function(){return document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen}},r={init:function(n){l=e.extend(l,s,n);var r=this.each(function(){var n=e(this),s=n.data(t);s||(n.attr("data-"+t,!0),l.arrows&&i.buildArrows.call(n),l.progressBar&&i.buildProgressBar.call(n),l.pagination&&(window.paginator?i.buildPagination.call(n):e.error('For enable pagination you must include paginator.js before "'+t+'" lib')),l.fullScreen&&(this.requestFullScreen||this.webkitRequestFullScreen||this.mozRequestFullScreen||this.msRequestFullscreen)&&i.buildFullScreen.call(n),i.addFocusedElement.call(n),i.bindPresentationEvents.call(n),i.show.call(n,l.activeSlide),n.trigger("initEnd."+t,n))});return i.bindCommonEventHandlers(),r},destroy:function(){this.each(function(){var n=e(this);i.unbindEventHandlers.call(n),i.dropArrows.call(n),i.dropProgressBar.call(n),i.dropPagination.call(n),i.dropFullScreen.call(n),i.dropFocusElement.call(n),n.removeAttr("data-"+t,!0),n.trigger("destroyEnd."+t,n)})},next:function(t){return this.each(function(){i.show.call(e(this),!0,t)})},previous:function(t){return this.each(function(){i.show.call(e(this),!1,t)})},setActive:function(t,n){return this.each(function(){i.show.call(e(this),t,n)})}};e.fn[t]&&e.error('You trying include "'+t+'" plugin again.'),e.fn[t]=function(n){return r[n]?r[n].apply(this,Array.prototype.slice.call(arguments,1)):e.isPlainObject(n)||!n?r.init.apply(this,arguments):void e.error("Method with name "+n+" doesn't exist for \""+t+'" plugin. Check documentation.')}}(jQuery);