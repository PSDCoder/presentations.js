!function(e){"use strict";var t="presentations",n="presentation_state_enabled",s="presentation-focused-element",i={activeSlide:1,slideWithKeyboard:!0,loopMode:!1,pagination:!0,paginationOptions:{afterFirst:1,beforeLast:1,beforeCurrent:1,afterCurrent:1,prevText:"Prev",nextText:"Next"},progressBar:!0,arrows:!0,fullScreen:!0,fullScreenKey:"f",containerClass:"presentation",fullScreenClass:"fullscreen-mode",nextButtonClass:"presentation__button_action_next",nextButtonText:"Next",previousButtonClass:"presentation__button_action_previous",previousButtonText:"Previous",slidesListClass:"presentation-slides",slideClass:"presentation-slides__slide",activeSlideClass:"presentation-slides__slide_state_active",paginationClass:"presentation-navigation",paginationItemClass:"presentation-navigation__item",progressBarClass:"presentation-progress-bar",progressBarCountClass:"presentation-progress-bar__count",fullScreenButtonClass:"presentation__button_action_fullscreen",fullScreenButtonText:"Fullscreen (f)",fullScreenButtonTextEnabled:"Exit from fullscreen (f)"},l={bindPresentationEvents:function(){this.on("click",function(){l.getPresentations().length>1&&!l.getFullScreenElement()&&e("."+s,this).trigger("focus")}.bind(this))},bindCommonEventHandlers:function(){var n=e("body");n.data(t+"-handlers")||(e(window).on("keyup."+t,function(n){var s=null,i=l.getPresentations(),a=i.length,r=l.getFullScreenElement();if(r)s=e(r);else if(a&&2>a)s=e(i[0]);else if(a>1){var o=l.getFocusedPresentation();o.length&&(s=o)}s&&s.data(t).slideWithKeyboard&&(37===n.keyCode?l.show.call(s,!1):39===n.keyCode&&l.show.call(s,!0))}),l.supportsFullscreen()&&(e(window).on("keyup."+t,function(n){var s=l.getPresentations(),i=s.length,a=null;if(i&&2>i)a=e(s[0]);else{var r=l.getFullScreenElement();if(r)a=e(r);else{var o=l.getFocusedPresentation();o.length&&(a=o)}}if(a){var u=a.data(t);u.fullScreen&&n.keyCode===u.fullScreenKey.toUpperCase().charCodeAt(0)&&l.toggleFullScreen.call(a)}}),e(document).on("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange",function(s){var i=l.getFullScreenElement(),a=e(i?i:s.target).data(t).fullScreenClass;n[(i?"add":"remove")+"Class"](a)})),n.data(t+"-handlers",!0))},unbindEventHandlers:function(){this.unbind("."+t),this.length===l.getPresentations().length&&(e(window).unbind("."+t),e("body").data(t+"-handlers",null))},addFocusedElement:function(){this.prepend('<input type="text" class="'+s+'">')},dropFocusElement:function(){e("."+s,this).remove()},getFocusedPresentation:function(){return e(document.activeElement).parents("."+n)},getPresentations:function(){return e("."+n)},getSlides:function(){return e("."+this.data(t).slideClass,this)},show:function(n,s){var i,a,r=l.getSlides.call(this),o=r.length,u=this.data(t);if(e.isNumeric(n))a=0>n-1||n-1>=o?0:n-1;else for(var c=0;o>c;c++){var d=e(r[c]);if(d.hasClass(u.activeSlideClass)){if(n){if(o>c+1)a=c+1;else{if(!u.loopMode)return;a=0}this.trigger("nextSlide."+t,this,a)}else{if(0>c-1){if(!u.loopMode)return;a=o-1}else a=c-1;this.trigger("previousSlide."+t,this,a)}break}}0===a?this.trigger("firstSlide."+t,this,a):a===o-1&&this.trigger("lastSlide."+t,this,a),this.trigger("changeSlide."+t,this,a),i=e(r[a]),r.removeClass(u.activeSlideClass),i.addClass(u.activeSlideClass),u.loopMode||l.updateArrows.call(this,0===a,a===o-1),u.progressBar&&l.updateProgressBar.call(this,(a+1)/o),u.pagination&&l.updatePagination.call(this,a+1,o),e.isFunction(s)&&s(i)},buildPagination:function(){var n=this.data(t),s=e('<ul class="'+n.paginationClass+'"></ul>'),i=this;n.paginationOptions.loopMode=n.loopMode,this.append(s),s.on("click","a",function(t){t.preventDefault(),l.show.call(i,e(this).data("page"))})},updatePagination:function(n,s){var i=this.data(t),a=paginator(n,s,i.paginationOptions);e("."+i.paginationClass,this).html(l.getBuiltPaginationList.call(this,a))},getBuiltPaginationList:function(n){for(var s=this.data(t),i=e("<div/>"),l=0,a=n.length;a>l;l++){var r=null===n[l].page||n[l].disabled||n[l].current,o={text:n[l].text,"class":s.paginationClass+(r?"__text":"__link")},u=e(n[l].disabled||n[l].current?"<span/>":"<a/>",o);n[l].page&&(u.prop("href","#"),u.attr("data-page",n[l].page)),i.append(e("<li/>",{"class":s.paginationItemClass+(n[l].current?" "+s.paginationItemClass+"_state_active":"")}).append(u))}return i.html()},dropPagination:function(){e("."+this.data(t).paginationClass,this).remove()},buildProgressBar:function(){var n=this.data(t),s=e('<div class="'+n.progressBarCountClass+'"></div>'),i=e('<div class="'+n.progressBarClass+'"></div>');s.css({width:"0%"}),this.append(i.append(s))},updateProgressBar:function(n){e("."+this.data(t).progressBarCountClass,this).css({width:100*n+"%"})},dropProgressBar:function(){e("."+this.data(t).progressBarClass,this).remove()},buildArrows:function(){var e=this.data(t);this.prepend('<a class="'+e.previousButtonClass+'" href="#">'+e.previousButtonText+"</a>"),this.append('<a class="'+e.nextButtonClass+'" href="#">'+e.nextButtonText+"</a>"),this.on("click."+t,"."+e.previousButtonClass,function(e){e.preventDefault(),a.previous.apply(this)}.bind(this)),this.on("click."+t,"."+e.nextButtonClass,function(e){e.preventDefault(),a.next.apply(this)}.bind(this))},updateArrows:function(n,s){var i=this.data(t);e("."+i.previousButtonClass,this)[(n?"add":"remove")+"Class"](i.previousButtonClass+"_state_disabled"),e("."+i.nextButtonClass,this)[(s?"add":"remove")+"Class"](i.nextButtonClass+"_state_disabled")},dropArrows:function(){var n=this.data(t);e("."+n.previousButtonClass,this).remove(),e("."+n.nextButtonClass,this).remove()},buildFullScreen:function(){var n=this.data(t),s=e('<button class="'+n.fullScreenButtonClass+'">'+n.fullScreenButtonText+"</button>"),i=this;s.on("click",function(){l.toggleFullScreen.call(i),e(this).trigger("blur")}),this.append(s)},getFullScreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(){var n=this.data(t),s=l.getFullScreenElement();if(s)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.trigger("fullScreenExit."+t,this);else{var i=this[0];i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen(),this.trigger("fullScreen."+t,this)}e("."+n.fullScreenButtonClass,this).html(s?n.fullScreenButtonText:n.fullScreenButtonTextEnabled)},dropFullScreen:function(){e("."+this.data(t).fullScreenButtonClass,this).remove()},supportsFullscreen:function(){return document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen}},a={init:function(s){var a=this.each(function(){var a=e(this),r=a.data(t);r||(r=e.extend(!0,{},i,s),a.data(t,r),a.addClass(n),r.arrows&&l.buildArrows.call(a),r.progressBar&&l.buildProgressBar.call(a),r.pagination&&(window.paginator?l.buildPagination.call(a):e.error('For enable pagination you must include paginator.js before "'+t+'" lib')),r.fullScreen&&(this.requestFullScreen||this.webkitRequestFullScreen||this.mozRequestFullScreen||this.msRequestFullscreen)&&l.buildFullScreen.call(a),l.addFocusedElement.call(a),l.bindPresentationEvents.call(a),l.show.call(a,r.activeSlide),a.trigger("initEnd."+t,a))});return l.bindCommonEventHandlers(),a},destroy:function(){this.each(function(){var s=e(this);l.unbindEventHandlers.call(s),l.dropArrows.call(s),l.dropProgressBar.call(s),l.dropPagination.call(s),l.dropFullScreen.call(s),l.dropFocusElement.call(s),s.removeData(t),s.removeClass(n),s.trigger("destroyEnd."+t,s)})},next:function(t){return this.each(function(){l.show.call(e(this),!0,t)})},previous:function(t){return this.each(function(){l.show.call(e(this),!1,t)})},setActive:function(t,n){return this.each(function(){l.show.call(e(this),t,n)})}};e.fn[t]&&e.error('You trying include "'+t+'" plugin again.'),e.fn[t]=function(n){return a[n]?a[n].apply(this,Array.prototype.slice.call(arguments,1)):e.isPlainObject(n)||!n?a.init.apply(this,arguments):void e.error("Method with name "+n+" doesn't exist for \""+t+'" plugin. Check documentation.')}}(jQuery);