!function(t){"use strict";function e(e,s){a.push(this),this.$presentation=e,this.$presentation.data(r.options,s),this.options=s,this.$slides=this.prepareSlides(),this.cached={},s.arrows&&this.buildArrows(),s.progressBar&&this.buildProgressBar(),s.pagination&&(window.paginator?this.buildPagination():t.error('For enable pagination you must include paginator.js before "'+n+'" lib')),s.fullScreen&&l&&this.buildFullScreen(),this.bindHandlers(),this.show(s.startSlideIndex)}var n="presentations",s="presentation_state_focused",i="body_state_fullscreen",o={$document:t(document),$body:t(document.body)},r={presentation:n.slice(0,-1),handlers:n+"-handlers",count:n+"-count",options:n+"-options"},a=[],l=!!(document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen),u={startSlideIndex:0,slideWithKeyboard:!0,loopMode:!1,pagination:!0,paginationOptions:{afterFirst:1,beforeLast:1,beforeCurrent:1,afterCurrent:1,prevText:"Prev",nextText:"Next"},progressBar:!0,arrows:!0,fullScreen:!0,fullScreenKey:"f",containerClass:"presentation",nextButtonClass:"presentation__button_action_next",nextButtonText:"Next",previousButtonClass:"presentation__button_action_previous",previousButtonText:"Previous",slidesListClass:"presentation-slides",slideClass:"presentation-slides__slide",activeSlideClass:"presentation-slides__slide_state_active",paginationClass:"presentation-navigation",paginationItemClass:"presentation-navigation__item",progressBarClass:"presentation-progress-bar",progressBarCountClass:"presentation-progress-bar__count",fullScreenButtonClass:"presentation__button_action_fullscreen",fullScreenButtonText:"Fullscreen (f)",fullScreenButtonTextEnabled:"Exit from fullscreen (f)"};e.prototype.destroy=function(){this.clearHandlers(),this.$current.removeClass(this.options.activeSlideClass),this.$presentation.removeClass(s),this.destroyArrows(),this.destroyProgressBar(),this.destroyPagination(),this.destroyFullScreen(),a.splice(a.indexOf(this),1)},e.prototype.bindGlobalHandlers=function(){if(!o.$body.data(r.handlers)){var t=null;o.$document.on("keyup."+n,function(t){var n=e.prototype.getFocusedOrFullScreenPresentation();if(n&&n.data(r.options).slideWithKeyboard){var s=n.data(r.presentation);37===t.keyCode?s.showPrevious():39===t.keyCode&&s.showNext()}}),l&&(o.$document.on("keyup."+n,function(t){var n=e.prototype.getFocusedOrFullScreenPresentation();if(n){var s=n.data(r.options);s.fullScreen&&t.keyCode===s.fullScreenKeyCode&&n.data(r.presentation).toggleFullScreen()}}),o.$document.on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",function(){var n=e.prototype.getFullScreenElement();n?(o.$body.addClass(i),t=n):!n&&t&&(o.$body.removeClass(i),t=null)})),o.$body.data(r.handlers,!0)}},e.prototype.prepareSlides=function(){for(var e=t("."+this.options.slideClass,this.$presentation),n=0,s=e.length;s>n;n++)t(e[n]).data("id",n);return this.$current=t(e[this.options.startSlideIndex]?e[this.options.startSlideIndex]:e[0]),this.$current.addClass(this.options.activeSlideClass),e},e.prototype.bindHandlers=function(){this.$presentation.on("click."+n,t.proxy(function(){if(!this.$presentation.hasClass(s)){var t=this.getFocusedPresentation();t&&t.removeClass(s),this.$presentation.addClass(s)}},this))},e.prototype.clearHandlers=function(){this.$presentation.unbind("."+n),1===a.length&&(o.$document.unbind("."+n),o.$body.removeData(r.handlers))},e.prototype.getFocusedPresentation=function(){for(var t=0,e=a.length;e>t;t++)if(a[t].$presentation.hasClass(s))return a[t].$presentation;return null},e.prototype.getFocusedOrFullScreenPresentation=function(){var t=null,n=e.prototype.getFullScreenElement(),s=a.length;if(n)t=n;else if(1===s)t=a[0].$presentation;else if(s>1){var i=e.prototype.getFocusedPresentation();i&&(t=i)}return t},e.prototype.show=function(e,s){var i=this.$slides.length,o=this.$current.data("id");(0>e||e>=i)&&t.error("Wrong slide index: "+e+". Total count of slides: "+i),o+1===e||this.options.loopMode&&o+1===i&&0===e?this.$presentation.trigger("nextSlide."+n,this.$presentation,e):(o-1===e||this.options.loopMode&&0>o-1&&e===i-1)&&this.$presentation.trigger("previousSlide."+n,this.$presentation,e),0===e?this.$presentation.trigger("firstSlide."+n,this.$presentation,e):e===i-1&&this.$presentation.trigger("lastSlide."+n,this.$presentation,e),this.$presentation.trigger("changedSlide."+n,this.$presentation,e),this.$current.removeClass(this.options.activeSlideClass),this.$current=t(this.$slides[e]),this.$current.addClass(this.options.activeSlideClass),this.options.loopMode||this.updateArrows(0===e,e===i-1),this.options.progressBar&&this.updateProgressBar((e+1)/i),this.options.pagination&&this.updatePagination(e+1,i),t.isFunction(s)&&s(this.$current)},e.prototype.showPrevious=function(t){var e=this.$current.data("id"),n=e-1;if(0>n){if(!this.options.loopMode)return;n=this.$slides.length-1}this.show(n,t)},e.prototype.showNext=function(t){var e=this.$current.data("id"),n=e+1;if(n>=this.$slides.length){if(!this.options.loopMode)return;n=0}this.show(n,t)},e.prototype.buildPagination=function(){var e=this;this.options.paginationOptions.loopMode=this.options.loopMode,this.cached.$pagination=t('<ul class="'+this.options.paginationClass+'"></ul>'),this.$presentation.append(this.cached.$pagination),this.cached.$pagination.on("click","a",function(n){n.preventDefault(),e.show(t(this).data("page")-1)})},e.prototype.updatePagination=function(t,e){var n=paginator(t,e,this.options.paginationOptions);this.cached.$pagination.html(this.getBuiltPaginationList(n))},e.prototype.getBuiltPaginationList=function(e){for(var n,s,i,o=t("<div/>"),r=0,a=e.length;a>r;r++)n=null===e[r].page||e[r].disabled||e[r].current,s={text:e[r].text,"class":this.options.paginationClass+(n?"__text":"__link")},i=t(e[r].disabled||e[r].current?"<span/>":"<a/>",s),e[r].page&&(i.prop("href","#"),i.attr("data-page",e[r].page)),o.append(t("<li/>",{"class":this.options.paginationItemClass+(e[r].current?" "+this.options.paginationItemClass+"_state_active":"")}).append(i));return o.children()},e.prototype.destroyPagination=function(){this.cached.$pagination.unbind().remove()},e.prototype.buildProgressBar=function(){this.cached.$progressBarCount=t('<div class="'+this.options.progressBarCountClass+'"></div>'),this.cached.$progressBarContainer=t('<div class="'+this.options.progressBarClass+'"></div>'),this.cached.$progressBarCount.css({width:"0%"}),this.cached.$progressBarContainer.append(this.cached.$progressBarCount),this.$presentation.append(this.cached.$progressBarContainer)},e.prototype.updateProgressBar=function(t){this.cached.$progressBarCount.css({width:100*t+"%"})},e.prototype.destroyProgressBar=function(){this.cached.$progressBarContainer.remove()},e.prototype.buildArrows=function(){this.cached.$arrowPrevious=t('<a class="'+this.options.previousButtonClass+'" href="#">'+this.options.previousButtonText+"</a>"),this.cached.$arrowNext=t('<a class="'+this.options.nextButtonClass+'" href="#">'+this.options.nextButtonText+"</a>"),this.$presentation.prepend(this.cached.$arrowPrevious),this.$presentation.append(this.cached.$arrowNext),this.cached.$arrowPrevious.on("click."+n,t.proxy(function(t){t.preventDefault(),this.showPrevious()},this)),this.cached.$arrowNext.on("click."+n,t.proxy(function(t){t.preventDefault(),this.showNext()},this))},e.prototype.updateArrows=function(t,e){this.cached.$arrowPrevious[(t?"add":"remove")+"Class"](this.options.previousButtonClass+"_state_disabled"),this.cached.$arrowNext[(e?"add":"remove")+"Class"](this.options.nextButtonClass+"_state_disabled")},e.prototype.destroyArrows=function(){this.cached.$arrowPrevious.unbind().remove(),this.cached.$arrowNext.unbind().remove()},e.prototype.buildFullScreen=function(){var e=this;this.options.fullScreenKeyCode=this.options.fullScreenKey.toUpperCase().charCodeAt(0),this.cached.$fullscreenButton=t('<button class="'+this.options.fullScreenButtonClass+'">'+this.options.fullScreenButtonText+"</button>"),this.cached.$fullscreenButton.on("click",function(){e.toggleFullScreen(),t(this).trigger("blur")}),this.$presentation.append(this.cached.$fullscreenButton)},e.prototype.getFullScreenElement=function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e?t(e):e},e.prototype.toggleFullScreen=function(){var t=this.getFullScreenElement();if(t)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.$presentation.trigger("fullScreenExit."+n,this.$presentation);else{var e=this.$presentation[0];e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.$presentation.trigger("fullScreen."+n,this.$presentation)}this.cached.$fullscreenButton.html(t?this.options.fullScreenButtonText:this.options.fullScreenButtonTextEnabled)},e.prototype.destroyFullScreen=function(){this.cached.$fullscreenButton.unbind().remove()};var c={init:function(s){var i=this.each(function(){var i=t(this),o=i.data(r.presentation);if(!o){var a=t.extend(!0,{},u,s);i.data(r.presentation,new e(t(i[0]),a)),i.trigger("initEnd."+n,i)}});return e.prototype.bindGlobalHandlers(),i},destroy:function(){this.each(function(){var e=t(this),s=e.data(r.presentation);s.destroy(),e.removeData(r.presentation),e.trigger("destroyEnd."+n,e)})},previous:function(e){return this.each(function(){t(this).data(r.presentation).showPrevious(e)})},next:function(e){return this.each(function(){t(this).data(r.presentation).showNext(e)})},setActive:function(e,n){return this.each(function(){t(this).data(r.presentation).show(e,n)})}};t.fn[n]&&t.error('You trying include "'+n+'" plugin again.'),t.fn[n]=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):t.isPlainObject(e)||!e?c.init.apply(this,arguments):void t.error("Method with name "+e+" doesn't exist for \""+n+'" plugin. Check documentation.')}}(jQuery);