!function(e){"use strict";var t="presentations",n="presentation_state_enabled",s="presentation-focused-element",l={activeSlide:1,slideWithKeyboard:!0,loopMode:!1,pagination:!0,paginationOptions:{afterFirst:1,beforeLast:1,beforeCurrent:1,afterCurrent:1,prevText:"Prev",nextText:"Next"},progressBar:!0,arrows:!0,fullScreen:!0,fullScreenKey:"f",containerClass:"presentation",fullScreenClass:"fullscreen-mode",nextButtonClass:"presentation__button_action_next",nextButtonText:"Next",previousButtonClass:"presentation__button_action_previous",previousButtonText:"Previous",slidesListClass:"presentation-slides",slideClass:"presentation-slides__slide",activeSlideClass:"presentation-slides__slide_state_active",paginationClass:"presentation-navigation",paginationItemClass:"presentation-navigation__item",progressBarClass:"presentation-progress-bar",progressBarCountClass:"presentation-progress-bar__count",fullScreenButtonClass:"presentation__button_action_fullscreen",fullScreenButtonText:"Fullscreen (f)",fullScreenButtonTextEnabled:"Exit from fullscreen (f)"},i={bindPresentationEvents:function(){this.on("click",function(){i.getPresentations().length>1&&!i.getFullScreenElement()&&e("."+s,this).trigger("focus")}.bind(this))},bindCommonEventHandlers:function(){var n=e("body");if(!n.data(t+"-handlers")){var s=null;e(window).on("keyup."+t,function(n){var s=null,l=i.getPresentations(),a=l.length,r=i.getFullScreenElement();if(r)s=e(r);else if(a&&2>a)s=e(l[0]);else if(a>1){var o=i.getFocusedPresentation();o.length&&(s=o)}s&&s.data(t).slideWithKeyboard&&(37===n.keyCode?i.show.call(s,!1):39===n.keyCode&&i.show.call(s,!0))}),i.supportsFullscreen()&&(e(window).on("keyup."+t,function(n){var s=i.getPresentations(),l=s.length,a=null;if(l&&2>l)a=e(s[0]);else{var r=i.getFullScreenElement();if(r)a=e(r);else{var o=i.getFocusedPresentation();o.length&&(a=o)}}if(a){var u=a.data(t);u.fullScreen&&n.keyCode===u.fullScreenKey.toUpperCase().charCodeAt(0)&&i.toggleFullScreen.call(a)}}),e(document).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",function(){var l=i.getFullScreenElement();l?(s=e(l),n.addClass(s.data(t).fullScreenClass)):!l&&s&&(n.removeClass(s.data(t).fullScreenClass),s=null)})),n.data(t+"-handlers",!0)}},unbindEventHandlers:function(){this.unbind("."+t),this.length===i.getPresentations().length&&(e(window).unbind("."+t),e("body").data(t+"-handlers",null))},addFocusedElement:function(){this.prepend('<input type="text" class="'+s+'">')},dropFocusElement:function(){e("."+s,this).remove()},getFocusedPresentation:function(){return e(document.activeElement).parents("."+n)},getPresentations:function(){return e("."+n)},getSlides:function(){return e("."+this.data(t).slideClass,this)},show:function(n,s){var l,a,r=i.getSlides.call(this),o=r.length,u=this.data(t);if(e.isNumeric(n))a=0>n-1||n-1>=o?0:n-1;else for(var c=0;o>c;c++){var d=e(r[c]);if(d.hasClass(u.activeSlideClass)){if(n){if(o>c+1)a=c+1;else{if(!u.loopMode)return;a=0}this.trigger("nextSlide."+t,this,a)}else{if(0>c-1){if(!u.loopMode)return;a=o-1}else a=c-1;this.trigger("previousSlide."+t,this,a)}break}}0===a?this.trigger("firstSlide."+t,this,a):a===o-1&&this.trigger("lastSlide."+t,this,a),this.trigger("changeSlide."+t,this,a),l=e(r[a]),r.removeClass(u.activeSlideClass),l.addClass(u.activeSlideClass),u.loopMode||i.updateArrows.call(this,0===a,a===o-1),u.progressBar&&i.updateProgressBar.call(this,(a+1)/o),u.pagination&&i.updatePagination.call(this,a+1,o),e.isFunction(s)&&s(l)},buildPagination:function(){var n=this.data(t),s=e('<ul class="'+n.paginationClass+'"></ul>'),l=this;n.paginationOptions.loopMode=n.loopMode,this.append(s),s.on("click","a",function(t){t.preventDefault(),i.show.call(l,e(this).data("page"))})},updatePagination:function(n,s){var l=this.data(t),a=paginator(n,s,l.paginationOptions);e("."+l.paginationClass,this).html(i.getBuiltPaginationList.call(this,a))},getBuiltPaginationList:function(n){for(var s=this.data(t),l=e("<div/>"),i=0,a=n.length;a>i;i++){var r=null===n[i].page||n[i].disabled||n[i].current,o={text:n[i].text,"class":s.paginationClass+(r?"__text":"__link")},u=e(n[i].disabled||n[i].current?"<span/>":"<a/>",o);n[i].page&&(u.prop("href","#"),u.attr("data-page",n[i].page)),l.append(e("<li/>",{"class":s.paginationItemClass+(n[i].current?" "+s.paginationItemClass+"_state_active":"")}).append(u))}return l.html()},dropPagination:function(){e("."+this.data(t).paginationClass,this).remove()},buildProgressBar:function(){var n=this.data(t),s=e('<div class="'+n.progressBarCountClass+'"></div>'),l=e('<div class="'+n.progressBarClass+'"></div>');s.css({width:"0%"}),this.append(l.append(s))},updateProgressBar:function(n){e("."+this.data(t).progressBarCountClass,this).css({width:100*n+"%"})},dropProgressBar:function(){e("."+this.data(t).progressBarClass,this).remove()},buildArrows:function(){var e=this.data(t);this.prepend('<a class="'+e.previousButtonClass+'" href="#">'+e.previousButtonText+"</a>"),this.append('<a class="'+e.nextButtonClass+'" href="#">'+e.nextButtonText+"</a>"),this.on("click."+t,"."+e.previousButtonClass,function(e){e.preventDefault(),a.previous.apply(this)}.bind(this)),this.on("click."+t,"."+e.nextButtonClass,function(e){e.preventDefault(),a.next.apply(this)}.bind(this))},updateArrows:function(n,s){var l=this.data(t);e("."+l.previousButtonClass,this)[(n?"add":"remove")+"Class"](l.previousButtonClass+"_state_disabled"),e("."+l.nextButtonClass,this)[(s?"add":"remove")+"Class"](l.nextButtonClass+"_state_disabled")},dropArrows:function(){var n=this.data(t);e("."+n.previousButtonClass,this).remove(),e("."+n.nextButtonClass,this).remove()},buildFullScreen:function(){var n=this.data(t),s=e('<button class="'+n.fullScreenButtonClass+'">'+n.fullScreenButtonText+"</button>"),l=this;s.on("click",function(){i.toggleFullScreen.call(l),e(this).trigger("blur")}),this.append(s)},getFullScreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(){var n=this.data(t),s=i.getFullScreenElement();if(s)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.trigger("fullScreenExit."+t,this);else{var l=this[0];l.requestFullscreen?l.requestFullscreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.msRequestFullscreen&&l.msRequestFullscreen(),this.trigger("fullScreen."+t,this)}e("."+n.fullScreenButtonClass,this).html(s?n.fullScreenButtonText:n.fullScreenButtonTextEnabled)},dropFullScreen:function(){e("."+this.data(t).fullScreenButtonClass,this).remove()},supportsFullscreen:function(){return document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen}},a={init:function(s){var a=this.each(function(){var a=e(this),r=a.data(t);r||(r=e.extend(!0,{},l,s),a.data(t,r),a.addClass(n),r.arrows&&i.buildArrows.call(a),r.progressBar&&i.buildProgressBar.call(a),r.pagination&&(window.paginator?i.buildPagination.call(a):e.error('For enable pagination you must include paginator.js before "'+t+'" lib')),r.fullScreen&&i.supportsFullscreen()&&i.buildFullScreen.call(a),i.addFocusedElement.call(a),i.bindPresentationEvents.call(a),i.show.call(a,r.activeSlide),a.trigger("initEnd."+t,a))});return i.bindCommonEventHandlers(),a},destroy:function(){this.each(function(){var s=e(this);i.unbindEventHandlers.call(s),i.dropArrows.call(s),i.dropProgressBar.call(s),i.dropPagination.call(s),i.dropFullScreen.call(s),i.dropFocusElement.call(s),s.removeData(t),s.removeClass(n),s.trigger("destroyEnd."+t,s)})},next:function(t){return this.each(function(){i.show.call(e(this),!0,t)})},previous:function(t){return this.each(function(){i.show.call(e(this),!1,t)})},setActive:function(t,n){return this.each(function(){i.show.call(e(this),t,n)})}};e.fn[t]&&e.error('You trying include "'+t+'" plugin again.'),e.fn[t]=function(n){return a[n]?a[n].apply(this,Array.prototype.slice.call(arguments,1)):e.isPlainObject(n)||!n?a.init.apply(this,arguments):void e.error("Method with name "+n+" doesn't exist for \""+t+'" plugin. Check documentation.')}}(jQuery);